/*
 *  jquery-ryukyu - v1.0.0
 *  jQuery plugins development.
 *  https://ryukyu-i.vn/
 *
 *  Made by Ryukyu Interactive VietNam
 *  Under MIT License
 */
!function(a,b,c,d){"use strict";function e(b,c){this.element=b,this.settings=a.extend({},g,c),this._defaults=g,this._name=f,this.init()}var f="ryukyumenu",g={addCloseButtonMobile:!0,offsetTop:"45",hamburgerClass:"menu-icon",subHamburgerClass:"sub-menu-icon",closeButtonClass:"close-menu-icon"};a.extend(e.prototype,{init:function(){var c=this,d=a(this.element),e=this.settings;d.before('<div class="js-menu-wrap"></div>'),d.appendTo(d.prev());var f='<a href="javascript:void(0)" class="'+e.hamburgerClass+' js-menu-hamburger-button"><span></span><span></span><span></span></a>',g=d.parent();g.before(f);var h=a(".js-menu-hamburger-button");h.on("click",function(){c.setGlobalNav(g,h,e.offsetTop)});var i='<span class="'+e.subHamburgerClass+' js-menu-sub-button"><span></span><span></span></span>';a(d.find("li")).each(function(){var b=a(this),c=b.find("ul");c.length&&(c.before('<div class="js-menu-sub-wrap"></div>'),c.appendTo(c.prev()),c.parent().before(i))});var j=a(".js-menu-sub-button"),k=j.next();if(j.on("click",function(){var b=a(this),c=b.next(),d=b.prev();if(c.toggleClass("open"),c.hasClass("open")){var e=c.children("ul").height();c.css({height:e+"px",overflow:"hidden"}),b.addClass("on"),d.addClass("on")}else c.css({height:0,overflow:"hidden"}),b.removeClass("on"),d.removeClass("on")}),e.addCloseButtonMobile){var l='<a href="#" class="'+e.closeButtonClass+' js-menu-close-mobile"><span class="icon-close"><span></span><span></span></span></a>';g.append(l);var m=a(".js-menu-close-mobile"),n=b.innerWidth?b.innerWidth:a(b).width();n<992?m.show():m.hide(),a(b).on("ready resize",function(){n=b.innerWidth?b.innerWidth:a(b).width(),n<992?m.show():m.hide()}),a(b).resize(function(){c.responsiveMenu(g,h,j,k)}),m.on("click",function(){c.setGlobalNav(g,h,e.offsetTop)})}c.responsiveMenu(g,h,j,k),a(b).resize(function(){c.responsiveMenu(g,h,j,k)})},setGlobalNav:function(d,e,f){if(d.toggleClass("open"),d.hasClass("open")){e.addClass("on");var g=b.innerHeight?b.innerHeight:a(b).height();d.css({height:g-f+"px",overflow:"auto"}),a("body").css({height:"100%",overflow:"hidden"}),this.removeIOSRubberEffect(c.querySelector(".js-menu-wrap"))}else d.css({height:0,overflow:"hidden"}),e.removeClass("on")},removeIOSRubberEffect:function(a){a.addEventListener("touchstart",function(){var b=a.scrollTop,c=a.scrollHeight,d=b+a.offsetHeight;0===b?a.scrollTop=1:d===c&&(a.scrollTop=b-1)}),a.addEventListener("touchmove",function(b){a.offsetHeight<a.scrollHeight?b._isScroller=!0:b._isScroller=!1}),c.body.addEventListener("touchmove",function(a){a._isScroller===!1&&a.preventDefault()})},responsiveMenu:function(c,d,e,f){(b.innerWidth?b.innerWidth:a(b).width())>992?(a(c).css({height:"auto",overflow:"auto"}),a(d).hide(),a(e).hide(),a(f).css("height","auto")):(a(c).css({height:0,overflow:"hidden"}),a(d).show(),a(e).show(),a(f).css({height:0,overflow:"hidden"}))}}),a.fn[f]=function(b){return this.each(function(){a.data(this,"plugin_"+f)||a.data(this,"plugin_"+f,new e(this,b))})}}(jQuery,window,document);